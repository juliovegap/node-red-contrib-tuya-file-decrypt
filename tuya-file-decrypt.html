<script type="text/javascript">
  RED.nodes.registerType('tuya-file-decrypt', {
      category: 'Tuya',
      color: '#ff6800',
      defaults: {
          name: {value:""},
          accessId: {value:""},
          accessKey: {value:""},
          endpoint: {value:""},
          deviceId: {value:""},
          logLevel: {value: 'log-level-debug', required: false}
      },
      inputs: 1,
      outputs: 1,
      icon: "tuya1.png",
      label: function() {
          return this.name || "Tuya File Decrypt";
      },
      oneditprepare: function () {
        let logLevel = this.logLevel || 'log-level-debug';
        $("select[name='node-input-logLevel']")
          .find(`option[value='${logLevel}']`)
          .attr('selected', true);
      }
    });
</script>

<script type="text/x-red" data-template-name="tuya-file-decrypt">
    <div class="form-row">
        <label for="node-input-accessId"><i class="fa fa-key"></i> Access ID</label>
        <input type="text" id="node-input-accessId">
    </div>
    
    <div class="form-row">
        <label for="node-input-accessKey"><i class="fa fa-lock"></i> Access Key</label>
        <input type="text" id="node-input-accessKey">
    </div>

    <div class="form-row">
    <label for="node-input-endpoint"><i class="fa fa-globe"></i> Endpoint</label>
        <select id="node-input-endpoint">
            <option value="eu-central-1">EU Central (Frankfurt) Data Center</option>
            <option value="eu-west-1">EU West Data Center</option>
            <option value="cn-shanghai">China Mainland Data Center</option>
            <option value="cn-beijing">China North Data Center</option>
            <option value="ap-south-1">India Data Center</option>
            <option value="ap-southeast-1">Southeast Asia Data Center</option>
            <option value="us-east-1">US East Data Center</option>
            <option value="us-west-1">US West Data Center</option>
        </select>
    </div>

    <div class="form-row">
        <label for="node-input-deviceId"><i class="fa fa-cube"></i> Device ID</label>
        <input type="text" id="node-input-deviceId">
    </div>

    <div class="form-row">
      <label style="width:100%" for="node-input-loglevel"
        ><i class="fa fa-file"></i> Log Level (Will not override the node-red
        logging config. Only applies to this node)</label
      >
    </div>

    <div class="form-row">
      <select name="node-input-logLevel" id="node-input-logLevel">
        <option value="log-level-error">Error</option>
        <option value="log-level-info">Info</option>
        <option value="log-level-debug">Debug</option>
        <option value="log-level-disable">Disable</option>
      </select>
    </div>

</script>

<script type="text/x-red" data-help-name="tuya-file-decrypt">
    <p>A Node-RED contribution to decrypt Tuya Files.</p>
</script>
